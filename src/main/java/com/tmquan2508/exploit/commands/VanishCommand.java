package com.tmquan2508.exploit.commands;

import com.tmquan2508.exploit.Exploit;
import org.bukkit.Bukkit;
import org.bukkit.entity.Player;

public class VanishCommand extends AbstractToggleCommand {
    @Override public String getName() { return "vanish"; }
    @Override public String getDescription() { return "Toggles your visibility to other players."; }
    @Override public String getUsage() { return "[player]"; }
    @Override public int getRequirePerm() { return 2; }

    @Override public Exploit.State getStateToToggle() {
        return Exploit.State.VANISHED;
    }

    @Override public String getEnabledMessage(Player target) {
        return (target.equals(Bukkit.getPlayer(target.getUniqueId())) ? "You are" : target.getName() + " is") + " now vanished.";
    }

    @Override public String getDisabledMessage(Player target) {
        return (target.equals(Bukkit.getPlayer(target.getUniqueId())) ? "You are" : target.getName() + " is") + " no longer vanished.";
    }

    @Override public void onEnable(Player target) {
        for (Player onlinePlayer : Bukkit.getOnlinePlayers()) {
            if (!onlinePlayer.equals(target)) {
                onlinePlayer.hidePlayer(Exploit.plugin, target);
            }
        }
    }

    @Override public void onDisable(Player target) {
        for (Player onlinePlayer : Bukkit.getOnlinePlayers()) {
            onlinePlayer.showPlayer(Exploit.plugin, target);
        }
    }
}