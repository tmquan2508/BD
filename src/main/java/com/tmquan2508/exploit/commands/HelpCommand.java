package com.tmquan2508.exploit.commands;

import com.tmquan2508.exploit.Exploit;
import org.bukkit.ChatColor;
import org.bukkit.entity.Player;

public class HelpCommand extends Command {

    public HelpCommand() { super(); }

    @Override public String getName() { return "help"; }
    @Override public String getDescription() { return "Display this message, or description of a command."; }
    @Override public String getUsage() { return "[command]"; }
    @Override public int getRequirePerm() { return 1; }

    @Override
    public void execute(Player sender, String[] args) {
        int userPerm = Exploit.helpers.getPlayerPermissionLevel(sender);

        if (args.length == 0) {
            StringBuilder sb = new StringBuilder();
            sb.append(Exploit.config.help_detail_color).append("Thicc Industries Backdoor\n");
            sb.append(Exploit.config.help_detail_color).append("-----------------------------------------------------\n\n");

            for (Command cmd : Exploit.commandHandler.getCommands().values()) {
                if (userPerm >= cmd.getRequirePerm()) {
                    sb.append(Exploit.config.help_command_name_color).append(Exploit.config.command_prefix).append(cmd.getName())
                            .append(": ").append(Exploit.config.help_command_desc_color).append(cmd.getDescription()).append("\n");
                }
            }
            Exploit.sender.sendMessage(sender, sb.toString());
        } else {
            Command cmd = Exploit.commandHandler.getCommands().get(args[0].toLowerCase());
            if (cmd != null && userPerm >= cmd.getRequirePerm()) {
                Exploit.sender.sendMessage(sender, Exploit.config.help_command_name_color + Exploit.config.command_prefix + cmd.getName() + " " + ChatColor.GRAY + cmd.getUsage());
                Exploit.sender.sendMessage(sender, Exploit.config.help_command_desc_color + cmd.getDescription());
            } else {
                Exploit.sender.sendError(sender, "Command not found: " + args[0]);
            }
        }
    }
}